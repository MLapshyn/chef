192.168.56.23 -----> Installing Chef Omnibus (-v 12)
192.168.56.23 downloading https://omnitruck-direct.chef.io/chef/install.sh
192.168.56.23   to file /tmp/install.sh.3146/install.sh
192.168.56.23 trying wget...
192.168.56.23 el 6 x86_64
192.168.56.23 Getting information for chef stable 12 for el...
192.168.56.23 downloading https://omnitruck-direct.chef.io/stable/chef/metadata?v=12&p=el&pv=6&m=x86_64
192.168.56.23   to file /tmp/install.sh.3151/metadata.txt
192.168.56.23 trying wget...
192.168.56.23 sha1	2b859af3d6e99502b7a1d75671a4f629a224e9ad
192.168.56.23 sha256	0aca8e46ff8ada7af09b0d65b6f7738eb7b25d269482000be1dee7aaba154011
192.168.56.23 url	https://packages.chef.io/stable/el/6/chef-12.9.38-1.el6.x86_64.rpm
192.168.56.23 version	12.9.38
192.168.56.23 downloaded metadata file looks valid...
192.168.56.23 downloading https://packages.chef.io/stable/el/6/chef-12.9.38-1.el6.x86_64.rpm
192.168.56.23   to file /tmp/install.sh.3151/chef-12.9.38-1.el6.x86_64.rpm
192.168.56.23 trying wget...
192.168.56.23 Comparing checksum with sha256sum...
192.168.56.23 Installing chef 12
192.168.56.23 installing with rpm...
192.168.56.23 warning: /tmp/install.sh.3151/chef-12.9.38-1.el6.x86_64.rpm: Header V4 DSA/SHA1 Signature, key ID 83ef826a: NOKEY
192.168.56.23 Preparing...                                                            (100%)#                                           (100%)##                                          (100%)###                                         (100%)####                                        (100%)#####                                       (100%)######                                      (100%)#######                                     (100%)########                                    (100%)#########                                   (100%)##########                                  (100%)###########                                 (100%)############                                (100%)#############                               (100%)##############                              (100%)###############                             (100%)################                            (100%)#################                           (100%)##################                          (100%)###################                         (100%)####################                        (100%)#####################                       (100%)######################                      (100%)#######################                     (100%)########################                    (100%)#########################                   (100%)##########################                  (100%)###########################                 (100%)############################                (100%)#############################               (100%)##############################              (100%)###############################             (100%)################################            (100%)#################################           (100%)##################################          (100%)###################################         (100%)####################################        (100%)#####################################       (100%)######################################      (100%)#######################################     (100%)########################################    (100%)#########################################   (100%)##########################################  (100%)########################################### (100%)########################################### [100%]
192.168.56.23    1:chef                                                               (  1%)#                                           (  3%)##                                          (  6%)###                                         (  8%)####                                        ( 10%)#####                                       ( 13%)######                                      ( 15%)#######                                     ( 17%)########                                    ( 19%)#########                                   ( 22%)##########                                  ( 24%)###########                                 ( 26%)############                                ( 28%)#############                               ( 31%)##############                              ( 33%)###############                             ( 35%)################                            ( 38%)#################                           ( 40%)##################                          ( 42%)###################                         ( 44%)####################                        ( 47%)#####################                       ( 49%)######################                      ( 51%)#######################                     ( 53%)########################                    ( 56%)#########################                   ( 58%)##########################                  ( 60%)###########################                 ( 63%)############################                ( 65%)#############################               ( 67%)##############################              ( 69%)###############################             ( 72%)################################            ( 74%)#################################           ( 76%)##################################          ( 78%)###################################         ( 81%)####################################        ( 83%)#####################################       ( 85%)######################################      ( 88%)#######################################     ( 90%)########################################    ( 92%)#########################################   ( 94%)##########################################  ( 97%)########################################### ( 99%)########################################### [100%]
192.168.56.23 Thank you for installing Chef!
192.168.56.23 Starting the first Chef Client run...
192.168.56.23 Starting Chef Client, version 12.9.38[0m
192.168.56.23 Creating a new client identity for mnode8 using the validator key.[0m
192.168.56.23 resolving cookbooks for run list: ["myjboss", "java"][0m
192.168.56.23 Synchronizing Cookbooks:[0m
192.168.56.23   - myjboss (0.1.0)[0m
192.168.56.23   - java (1.39.0)[0m
192.168.56.23   - apt (3.0.0)[0m
192.168.56.23 Installing Cookbook Gems:[0m
192.168.56.23 Compiling Cookbooks...[0m
192.168.56.23 [2016-04-21T13:33:40+01:00] WARN: Chef::Provider::AptRepository already exists!  Cannot create deprecation class for LWRP provider apt_repository from cookbook apt
192.168.56.23 [2016-04-21T13:33:40+01:00] WARN: AptRepository already exists!  Deprecation class overwrites Custom resource apt_repository from cookbook apt
192.168.56.23 Converging 17 resources[0m
192.168.56.23 Recipe: java::openjdk[0m
192.168.56.23   * yum_package[java-1.6.0-openjdk] action install
192.168.56.23     [32m- install version 1.6.0.38-1.13.10.0.el6_7 of package java-1.6.0-openjdk[0m
192.168.56.23 [0m  * yum_package[java-1.6.0-openjdk-devel] action install
192.168.56.23     [32m- install version 1.6.0.38-1.13.10.0.el6_7 of package java-1.6.0-openjdk-devel[0m
192.168.56.23 [0m  * java_alternatives[set-java-alternatives] action set
192.168.56.23     [32m- Add alternative for appletviewer[0m
192.168.56.23     [32m- Add alternative for apt[0m
192.168.56.23     [32m- Add alternative for extcheck[0m
192.168.56.23     [32m- Add alternative for idlj[0m
192.168.56.23     [32m- Add alternative for jar[0m
192.168.56.23     [32m- Add alternative for jarsigner[0m
192.168.56.23     [32m- Add alternative for java[0m
192.168.56.23     [32m- Add alternative for javac[0m
192.168.56.23     [32m- Add alternative for javadoc[0m
192.168.56.23     [32m- Add alternative for javah[0m
192.168.56.23     [32m- Add alternative for javap[0m
192.168.56.23     [32m- Add alternative for jconsole[0m
192.168.56.23     [32m- Add alternative for jdb[0m
192.168.56.23     [32m- Add alternative for jhat[0m
192.168.56.23     [32m- Add alternative for jinfo[0m
192.168.56.23     [32m- Add alternative for jmap[0m
192.168.56.23     [32m- Add alternative for jps[0m
192.168.56.23     [32m- Add alternative for jrunscript[0m
192.168.56.23     [32m- Add alternative for jsadebugd[0m
192.168.56.23     [32m- Add alternative for jstack[0m
192.168.56.23     [32m- Add alternative for jstat[0m
192.168.56.23     [32m- Add alternative for jstatd[0m
192.168.56.23     [32m- Add alternative for keytool[0m
192.168.56.23     [32m- Add alternative for native2ascii[0m
192.168.56.23     [32m- Add alternative for orbd[0m
192.168.56.23     [32m- Add alternative for pack200[0m
192.168.56.23     [32m- Add alternative for policytool[0m
192.168.56.23     [32m- Add alternative for rmic[0m
192.168.56.23     [32m- Add alternative for rmid[0m
192.168.56.23     [32m- Add alternative for rmiregistry[0m
192.168.56.23     [32m- Add alternative for schemagen[0m
192.168.56.23     [32m- Add alternative for serialver[0m
192.168.56.23     [32m- Add alternative for servertool[0m
192.168.56.23     [32m- Add alternative for tnameserv[0m
192.168.56.23     [32m- Add alternative for unpack200[0m
192.168.56.23     [32m- Add alternative for wsgen[0m
192.168.56.23     [32m- Add alternative for wsimport[0m
192.168.56.23     [32m- Add alternative for xjc[0m
192.168.56.23 [0mRecipe: java::set_java_home[0m
192.168.56.23   * ruby_block[set-env-java-home] action run
192.168.56.23     [32m- execute the ruby block set-env-java-home[0m
192.168.56.23 [0m  * directory[/etc/profile.d] action create (up to date)
192.168.56.23   * file[/etc/profile.d/jdk.sh] action create
192.168.56.23     [32m- create new file /etc/profile.d/jdk.sh[0m
192.168.56.23     [32m- update content in file /etc/profile.d/jdk.sh from none to 311825[0m
192.168.56.23     [37m--- /etc/profile.d/jdk.sh	2016-04-21 13:34:20.479019895 +0100[0m
192.168.56.23     [37m+++ /etc/profile.d/.chef-jdk.sh20160421-3222-coylam	2016-04-21 13:34:20.479019895 +0100[0m
192.168.56.23     [37m@@ -1 +1,2 @@[0m
192.168.56.23     [37m+export JAVA_HOME=/usr/lib/jvm/java-1.6.0[0m
192.168.56.23     [32m- change mode from '' to '0755'[0m
192.168.56.23 [0mRecipe: myjboss::default[0m
192.168.56.23   * yum_package[unzip] action install
192.168.56.23     [32m- install version 6.0-2.el6_6 of package unzip[0m
192.168.56.23 [0m  * user[jboss] action create
192.168.56.23     [32m- create user jboss[0m
192.168.56.23 [0m  * group[jboss] action create (up to date)
192.168.56.23   * remote_file[/opt/jboss-5.1.0.GA.zip] action create
192.168.56.23     [32m- create new file /opt/jboss-5.1.0.GA.zip[0m
192.168.56.23     [32m- update content in file /opt/jboss-5.1.0.GA.zip from none to be93bc[0m
192.168.56.23     [37m(file sizes exceed 10000000 bytes, diff output suppressed)[0m
192.168.56.23     [32m- change mode from '' to '0755'[0m
192.168.56.23     [32m- change owner from '' to 'jboss'[0m
192.168.56.23     [32m- change group from '' to 'jboss'[0m
192.168.56.23 [0m  * execute[extract_jboss] action run
192.168.56.23     [32m- execute unzip jboss-5.1.0.GA.zip[0m
192.168.56.23 [0m  * remote_file[/opt/testweb.zip] action create
192.168.56.23     [32m- create new file /opt/testweb.zip[0m
192.168.56.23     [32m- update content in file /opt/testweb.zip from none to b54a7a[0m
192.168.56.23     [37m(file sizes exceed 10000000 bytes, diff output suppressed)[0m
192.168.56.23     [32m- change mode from '' to '0755'[0m
192.168.56.23     [32m- change owner from '' to 'jboss'[0m
192.168.56.23     [32m- change group from '' to 'jboss'[0m
192.168.56.23 [0m  * execute[extract_testweb_zipfile] action run
192.168.56.23     [32m- execute unzip testweb.zip -d /opt/jboss-5.1.0.GA/server/default/deploy[0m
192.168.56.23 [0m  * template[/opt/jboss-5.1.0.GA/server/default/deploy/hudson.xml] action create
192.168.56.23     [32m- create new file /opt/jboss-5.1.0.GA/server/default/deploy/hudson.xml[0m
192.168.56.23     [32m- update content in file /opt/jboss-5.1.0.GA/server/default/deploy/hudson.xml from none to 503022[0m
192.168.56.23     [37m--- /opt/jboss-5.1.0.GA/server/default/deploy/hudson.xml	2016-04-21 13:40:35.885016875 +0100[0m
192.168.56.23     [37m+++ /opt/jboss-5.1.0.GA/server/default/deploy/.chef-hudson.xml20160421-3222-sp72bt	2016-04-21 13:40:35.884016844 +0100[0m
192.168.56.23     [37m@@ -1 +1,21 @@[0m
192.168.56.23     [37m+<?xml version="1.0" encoding="UTF-8"?>[0m
192.168.56.23     [37m+<cumulogic-app>[0m
192.168.56.23     [37m+<single-vm>false</single-vm>[0m
192.168.56.23     [37m+<application>[0m
192.168.56.23     [37m+  <application-context>hudson</application-context>[0m
192.168.56.23     [37m+  <jndi-name></jndi-name>[0m
192.168.56.23     [37m+  <db-name></db-name>[0m
192.168.56.23     [37m+  <db-type></db-type>[0m
192.168.56.23     [37m+<application-file-name>hudson.war</application-file-name>[0m
192.168.56.23     [37m+ <bind-global-services>true</bind-global-services>[0m
192.168.56.23     [37m+</application>[0m
192.168.56.23     [37m+ <services>[0m
192.168.56.23     [37m+    <framework>[0m
192.168.56.23     [37m+      <type>Java EE</type>[0m
192.168.56.23     [37m+       <engine>JBoss-5.1.0.GA</engine>[0m
192.168.56.23     [37m+      <no-of-nodes>1</no-of-nodes>[0m
192.168.56.23     [37m+      <max-nodes>2</max-nodes>[0m
192.168.56.23     [37m+    </framework>[0m
192.168.56.23     [37m+  </services>[0m
192.168.56.23     [37m+</cumulogic-app>[0m
192.168.56.23     [32m- change mode from '' to '0755'[0m
192.168.56.23     [32m- change owner from '' to 'jboss'[0m
192.168.56.23     [32m- change group from '' to 'jboss'[0m
192.168.56.23 [0m  * template[/etc/init.d/jboss] action create
192.168.56.23     [32m- create new file /etc/init.d/jboss[0m
192.168.56.23     [32m- update content in file /etc/init.d/jboss from none to d4a7a3[0m
192.168.56.23     [37m--- /etc/init.d/jboss	2016-04-21 13:40:35.895017051 +0100[0m
192.168.56.23     [37m+++ /etc/init.d/.chef-jboss20160421-3222-bb1hfg	2016-04-21 13:40:35.895017051 +0100[0m
192.168.56.23     [37m@@ -1 +1,48 @@[0m
192.168.56.23     [37m+#! /bin/sh[0m
192.168.56.23     [37m+# chkconfig: - 95 15[0m
192.168.56.23     [37m+### BEGIN INIT INFO[0m
192.168.56.23     [37m+# Required-Start: $local_fs $remote_fs $network $named[0m
192.168.56.23     [37m+# Required-Stop: $local_fs $remote_fs $network[0m
192.168.56.23     [37m+### END INIT INFO[0m
192.168.56.23     [37m+[0m
192.168.56.23     [37m+start(){[0m
192.168.56.23     [37m+        echo "Starting jboss.."[0m
192.168.56.23     [37m+        su -l  -c 'sh /opt/jboss-5.1.0.GA/bin/run.sh -b 192.168.56.22 -Djboss.server.log.dir=/opt/jboss-5.1.0.GA/logs > /opt/jboss-5.1.0.GA/logs/jboss_startup.log 2> /opt/jboss-5.1.0.GA/logs/jboss_startup_errors.log &'[0m
192.168.56.23     [37m+}[0m
192.168.56.23     [37m+[0m
192.168.56.23     [37m+stop(){[0m
192.168.56.23     [37m+        echo "Stopping jboss.."[0m
192.168.56.23     [37m+        su -l  -c 'sh /opt/jboss-5.1.0.GA/bin/shutdown.sh -s 192.168.56.22 -u admin -p admin -S > /opt/jboss-5.1.0.GA/logs/jboss_shutdown.log 2> /opt/jboss-5.1.0.GA/logs/jboss_shutdown_errors.log &' [0m
192.168.56.23     [37m+}[0m
192.168.56.23     [37m+[0m
192.168.56.23     [37m+restart(){[0m
192.168.56.23     [37m+        stop[0m
192.168.56.23     [37m+# give stuff some time to stop before we restart[0m
192.168.56.23     [37m+        sleep 60[0m
192.168.56.23     [37m+# protect against any services that can't stop before we restart (warning this kills all Java instances running as 'jboss' user)[0m
192.168.56.23     [37m+        su -l root -c 'killall java'[0m
192.168.56.23     [37m+# if the 'su -l ...' command fails try:[0m
192.168.56.23     [37m+        #   sudo -u jboss killall java[0m
192.168.56.23     [37m+        start[0m
192.168.56.23     [37m+}[0m
192.168.56.23     [37m+[0m
192.168.56.23     [37m+[0m
192.168.56.23     [37m+[0m
192.168.56.23     [37m+[0m
192.168.56.23     [37m+case "$1" in[0m
192.168.56.23     [37m+  start)[0m
192.168.56.23     [37m+        start[0m
192.168.56.23     [37m+        ;;[0m
192.168.56.23     [37m+  stop)[0m
192.168.56.23     [37m+        stop[0m
192.168.56.23     [37m+        ;;[0m
192.168.56.23     [37m+  restart)[0m
192.168.56.23     [37m+        restart[0m
192.168.56.23     [37m+        ;;[0m
192.168.56.23     [37m+  *)[0m
192.168.56.23     [37m+        echo "Usage: jboss {start|stop|restart}"[0m
192.168.56.23     [37m+        exit 1[0m
192.168.56.23     [37m+esac[0m
192.168.56.23     [37m+[0m
192.168.56.23     [37m+exit 0[0m
192.168.56.23     [32m- change mode from '' to '0755'[0m
192.168.56.23     [32m- change owner from '' to 'root'[0m
192.168.56.23     [32m- change group from '' to 'root'[0m
192.168.56.23 [0m  * execute[jboss folder ownership] action run
192.168.56.23     [32m- execute chown -R jboss:jboss /opt/jboss-5.1.0.GA[0m
192.168.56.23 [0m  * service[jboss] action enable
192.168.56.23     [32m- enable service service[jboss][0m
192.168.56.23 [0m  * service[jboss] action start
192.168.56.23     [32m- start service service[jboss][0m
192.168.56.23 [0m[0m
192.168.56.23 Running handlers:[0m
192.168.56.23 Running handlers complete
192.168.56.23 [0mChef Client finished, 16/18 resources updated in 07 minutes 05 seconds[0m
